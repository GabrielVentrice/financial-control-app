import{createRenderer as e,getRequestDependencies as t,getPreloadLinks as n,getPrefetchLinks as r}from"vue-bundle-renderer/runtime";import{j as o,u as s,a,b as i,e as l,g as u,c as d,f as c,h as p,i as h}from"../nitro/nitro.mjs";import{renderToString as f}from"vue/server-renderer";import{createHead as m,propsToString as g,renderSSRHead as y}from"unhead/server";import{stringify as b,uneval as w}from"devalue";import{walkResolver as _}from"unhead/utils";import{toValue as v,isRef as A,hasInjectionContext as R,inject as x,ref as C,watchEffect as j,getCurrentInstance as S,onBeforeUnmount as L,onDeactivated as T,onActivated as U}from"vue";import{DeprecationsPlugin as $,PromisesPlugin as k,TemplateParamsPlugin as P,AliasSortingPlugin as H}from"unhead/plugins";const VueResolver=(e,t)=>A(t)?v(t):t,z="usehead";function injectHead(){if(R()){const e=x(z);if(!e)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return e}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function useHead(e,t={}){const n=t.head||injectHead();return n.ssr?n.push(e||{},t):function(e,t,n={}){const r=C(!1);let o;j(()=>{const s=r.value?{}:_(t,VueResolver);o?o.patch(s):o=e.push(s,n)});S()&&(L(()=>{o.dispose()}),T(()=>{r.value=!0}),U(()=>{r.value=!1}));return o}(n,e,t)}function createHead(e={}){const t=m({...e,propResolvers:[VueResolver]});return t.install=function(e){return{install(t){t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide(z,e)}}.install}(t),t}const O={meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{name:"description",content:"Sistema de controle financeiro integrado com Google Sheets"}],link:[],style:[],script:[],noscript:[],title:"Controle Financeiro"},M={id:"teleports"};function baseURL(){return s().app.baseURL}function buildAssetsURL(...e){return o(publicAssetsURL(),s().app.buildAssetsDir,...e)}function publicAssetsURL(...e){const t=s().app,n=t.cdnURL||t.baseURL;return e.length?o(n,...e):n}const N=`<div${g({id:"__nuxt"})}>`,F="</div>",getClientManifest=()=>import("../build/client.manifest.mjs").then(e=>e.default||e).then(e=>"function"==typeof e?e():e),E=lazyCachedFunction(async()=>{const t=await getClientManifest();if(!t)throw new Error("client.manifest is not available");const n=await import("../build/server.mjs").then(e=>e.default||e);if(!n)throw new Error("Server bundle is not available");return e(n,{manifest:t,renderToString:async function(e,t){const n=await f(e,t);return N+n+F},buildAssetsURL:buildAssetsURL})}),I=lazyCachedFunction(async()=>{const t=await getClientManifest(),n=await import("../virtual/_virtual_spa-template.mjs").then(e=>e.template).catch(()=>"").then(e=>N+e+F),r=e(()=>()=>{},{manifest:t,renderToString:()=>n,buildAssetsURL:buildAssetsURL}),o=await r.renderToString({});return{rendererContext:r.rendererContext,renderToString:e=>{const t=s(e.event);return e.modules||=new Set,e.payload.serverRendered=!1,e.config={public:t.public,app:t.app},Promise.resolve(o)}}});function lazyCachedFunction(e){let t=null;return()=>(null===t&&(t=e().catch(e=>{throw t=null,e})),t)}const D=lazyCachedFunction(()=>import("../build/styles.mjs").then(e=>e.default||e));function renderPayloadJsonScript(e){const t={type:"application/json",innerHTML:e.data?b(e.data,e.ssrContext._payloadReducers):"","data-nuxt-data":"nuxt-app","data-ssr":!e.ssrContext.noSSR,id:"__NUXT_DATA__"};e.src&&(t["data-src"]=e.src);return[t,{innerHTML:`window.__NUXT__={};window.__NUXT__.config=${w(e.ssrContext.config)}`}]}function splitPayload(e){const{data:t,prerenderedAt:n,...r}=e.payload;return{initial:{...r,prerenderedAt:n},payload:{data:t,prerenderedAt:n}}}const J={disableDefaults:!0,disableCapoSorting:!1,plugins:[$,k,P,H]};const X={omitLineBreaks:!1},Z=/^[A-Za-z]:\//;const q=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,B=/^\/([A-Za-z]:)?$/;function cwd(){return"undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd().replace(/\\/g,"/"):"/"}const resolve=function(...e){let t="",n=!1;for(let r=(e=e.map(e=>function(e=""){return e?e.replace(/\\/g,"/").replace(Z,e=>e.toUpperCase()):e}(e))).length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:cwd();o&&0!==o.length&&(t=`${o}/${t}`,n=isAbsolute(o))}return t=function(e,t){let n="",r=0,o=-1,s=0,a=null;for(let i=0;i<=e.length;++i){if(i<e.length)a=e[i];else{if("/"===a)break;a="/"}if("/"===a){if(o===i-1||1===s);else if(2===s){if(n.length<2||2!==r||"."!==n[n.length-1]||"."!==n[n.length-2]){if(n.length>2){const e=n.lastIndexOf("/");-1===e?(n="",r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf("/")),o=i,s=0;continue}if(n.length>0){n="",r=0,o=i,s=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+=`/${e.slice(o+1,i)}`:n=e.slice(o+1,i),r=i-o-1;o=i,s=0}else"."===a&&-1!==s?++s:s=-1}return n}(t,!n),n&&!isAbsolute(t)?`/${t}`:t.length>0?t:"."};const isAbsolute=function(e){return q.test(e)};globalThis.__buildAssetsURL=buildAssetsURL,globalThis.__publicAssetsURL=publicAssetsURL;const G=!!M.id,W=G?`<div${g(M)}>`:"",Y=G?"</div>":"",K=/^[^?]*\/_payload.json(?:\?.*)?$/;let Q;const V=l(async e=>{const o=h(),l=e.path.startsWith("/__nuxt_error")?u(e):null;if(l&&!("__unenv__"in e.node.req))throw d({statusCode:404,statusMessage:"Page Not Found: /__nuxt_error"});const f=function(e){return{url:e.path,event:e,runtimeConfig:s(e),noSSR:e.context.nuxt?.noSSR||!1,head:createHead(J),error:!1,nuxt:void 0,payload:{},_payloadReducers:Object.create(null),modules:new Set}}(e),m={mode:"server"};f.head.push(O,m),l&&(l.statusCode&&=Number.parseInt(l.statusCode),function(e,t){e.error=!0,e.payload={error:t},e.url=t.url}(f,l));const g=K.test(f.url);if(g){const t=f.url.substring(0,f.url.lastIndexOf("/"))||"/";f.url=t,e._path=e.node.req.url=t}const w=c(e);!1===w.ssr&&(f.noSSR=!0);const _=await function(e){return e.noSSR?I():E()}(f);for(const e of await getClientManifest().then(e=>{const t=[];for(const n of Object.values(e))n._globalCSS&&t.push(n.src);return t}))f.modules.add(e);const v=await _.renderToString(f).catch(async e=>{if(f._renderResponse&&"skipping render"===e.message)return{};const t=!l&&f.payload?.error||e;throw await(f.nuxt?.hooks.callHook("app:error",t)),t}),A=f._renderResponse||g?[]:await async function(e){const t=await D(),n=new Set;for(const r of e)if(r in t&&t[r])for(const e of await t[r]())n.add(e);return Array.from(n).map(e=>({innerHTML:e}))}(f.modules??[]);if(await(f.nuxt?.hooks.callHook("app:rendered",{ssrContext:f,renderResult:v})),f._renderResponse)return f._renderResponse;if(f.payload?.error&&!l)throw f.payload.error;if(g){const e=function(e){return{body:b(splitPayload(e).payload,e._payloadReducers),statusCode:i(e.event),statusMessage:a(e.event),headers:{"content-type":"application/json;charset=utf-8","x-powered-by":"Nuxt"}}}(f);return e}const R=w.noScripts,{styles:x,scripts:C}=t(f,_.rendererContext);if(!R){let t=Q;t||(t=buildAssetsURL("0xHvNtxz.js"),f.runtimeConfig.app.cdnURL||/^(?:\/|\.+\/)/.test(t)?Q=t:(t=function(e,t){const n=resolve(e).replace(B,"$1").split("/"),r=resolve(t).replace(B,"$1").split("/");if(":"===r[0][1]&&":"===n[0][1]&&n[0]!==r[0])return r.join("/");const o=[...n];for(const e of o){if(r[0]!==e)break;n.shift(),r.shift()}return[...n.map(()=>".."),...r].join("/")}(e.path.replace(/\/[^/]+$/,"/"),p("/",t)),/^(?:\/|\.+\/)/.test(t)||(t=`./${t}`))),f.head.push({script:[{tagPosition:"head",tagPriority:-2,type:"importmap",innerHTML:JSON.stringify({imports:{"#entry":t}})}]},m)}f._preloadManifest&&!R&&f.head.push({link:[{rel:"preload",as:"fetch",fetchpriority:"low",crossorigin:"anonymous",href:buildAssetsURL(`builds/meta/${f.runtimeConfig.app.buildId}.json`)}]},{...m,tagPriority:"low"}),A.length&&f.head.push({style:A});const j=[];for(const e of Object.values(x))j.push({rel:"stylesheet",href:_.rendererContext.buildAssetsURL(e.file),crossorigin:""});if(j.length&&f.head.push({link:j},m),R||(f.head.push({link:n(f,_.rendererContext)},m),f.head.push({link:r(f,_.rendererContext)},m),f.head.push({script:renderPayloadJsonScript({ssrContext:f,data:f.payload})},{...m,tagPosition:"bodyClose",tagPriority:"high"})),!w.noScripts){const e="head";f.head.push({script:Object.values(C).map(t=>({type:t.module?"module":null,src:_.rendererContext.buildAssetsURL(t.file),defer:!t.module||null,tagPosition:e,crossorigin:""}))},m)}const{headTags:S,bodyTags:L,bodyTagsOpen:T,htmlAttrs:U,bodyAttrs:$}=await y(f.head,X),k={htmlAttrs:U?[U]:[],head:normalizeChunks([S]),bodyAttrs:$?[$]:[],bodyPrepend:normalizeChunks([T,f.teleports?.body]),body:[v.html,W+(G?joinTags([f.teleports?.[`#${M.id}`]]):"")+Y],bodyAppend:[L]};return await o.hooks.callHook("render:html",k,{event:e}),{body:(P=k,`<!DOCTYPE html><html${joinAttrs(P.htmlAttrs)}><head>${joinTags(P.head)}</head><body${joinAttrs(P.bodyAttrs)}>${joinTags(P.bodyPrepend)}${joinTags(P.body)}${joinTags(P.bodyAppend)}</body></html>`),statusCode:i(e),statusMessage:a(e),headers:{"content-type":"text/html;charset=utf-8","x-powered-by":"Nuxt"}};var P});function normalizeChunks(e){const t=[];for(const n of e){const e=n?.trim();e&&t.push(e)}return t}function joinTags(e){return e.join("")}function joinAttrs(e){return 0===e.length?"":" "+e.join(" ")}const ee=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{baseURL as b,z as h,ee as r,useHead as u};
